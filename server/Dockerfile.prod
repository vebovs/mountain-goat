FROM node:14.15.4-alpine
ARG MONGODB_CONNECTION_STRING
ENV MONGODB_CONNECTION_STRING=${{secrets.MONGODB_CONNECTION_STRING}}
ARG DATABASE
ENV DATABASE=${{secrets.DATABASE}} 
ARG SECRET
ENV SECRET=${{secrets.SECRET}} 
ARG HIKE_COLLECTION
ENV HIKE_COLLECTION=${{secrets.HIKE_COLLECTION}} 
ARG USER_COLLECTION
ENV USER_COLLECTION=${{secrets.USER_COLLECTION}} 
ARG SERVER_PORT
ENV SERVER_PORT ${SERVER_PORT}
WORKDIR /app
COPY ./package.json ./
RUN npm install
COPY . .
CMD ["npm", "run", "start"]